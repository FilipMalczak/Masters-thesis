\documentclass[./FM_mgr.tex]{subfiles}

\begin{document}
\appendix
\chapter{Przebieg procedury eksploracji} \label{appendix:explore-flow}

\section{Problem komiwojażera}

\subsection{Znalezienie konfiguracji początkowej}

\subsubsection{Przebieg}

Tabela \ref{table:tsp_init_flow} przedstawia przebieg wykorzystanej procedury. 
Lewa kolumna grupuje znalezione parametry w ramach jednego nawrotu eksploracji. 
Kolejne dwie, czytane od góry, określają jakie wartości zostały kolejno znalezione.

Jak widać, w pierwszym nawrocie znaleziono prawie najlepszą konfigurację. 
W drugim, udało się odnaleźć prawdopodobieństwa mutacji i krzyżowania które dawały lepsze wyniki.
Trzeci nawrót potwierdził, że znaleziona konfiguracja jest najlepsza z przeszukiwanych.

\begin{table}[H]
	\caption{Przebieg procedury eksploracji poszukującej parametrów początkowych \label{table:tsp_init_flow}}
	\centering
	\begin{tabular}{c|c|c|}
		\cline{2-3}
		\multicolumn{1}{l|}{} &
		{\bf Parametr} & 
		{\bf Określona wartość} \\ 
		\hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 1}}} &
		$\param{rozmiarPopulacji}$ & 
		50 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{wspDomieszek}$ & 
		0,0 \\ 
		\cline{2-3}
		\multicolumn{1}{|c|}{} & 
		$(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,8, 0,3) \\ \cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{max}$ & 
		100 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{opSelNat}$ & 
		\opName{natSel}(RS) \\ 
		\hline \hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 2}}} &
		$\param{rozmiarPopulacji}$ & 
		50 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{wspDomieszek}$ & 
		0,0 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$(\param{prawdKrzyzowania}, \param{prawdMutacji})$ 
		& (0,6, 0,1) \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{max}$ & 
		100 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{opSelNat}$ & 
		\opName{natSel}(RS) \\ 
		\hline \hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 3}}} &
		$\param{rozmiarPopulacji}$ & 
		50 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{wspDomieszek}$ & 
		0,0 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & 
		(0,6, 0,1) \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{max}$ & 
		100 \\ 
		\cline{2-3} 
		\multicolumn{1}{|c|}{} & 
		$\param{opSelNat}$ & 
		\opName{natSel}(RS) \\ 
		\hline
	\end{tabular}
\end{table}

\subsubsection{Wyniki}

Na tym etapie eksperymentów nie udało się znaleźć globalnego optimum.
W tabeli \ref{table:tsp_init_results} przedstawiono wyniki wszystkich powtórzeń dla konfiguracji znalezionej w procesie eksploracji.
Średnia różnica między znalezionym, a najlepszym możliwym rozwiązanie wynosiła około 13 tysięcy, podczas gdy optimum miało wartość około 27 i pół tysiąca.
Oznacza to, że znajdowane rozwiązania były około półtora raza gorsze niż poszukiwane.

Heurystyka zachowywała się dość stabilnie, tzn. za każdym uruchomieniem zwracała podobny wynik.
Odchylenie standardowe wyniosło około 2 tysiące, czyli mniej więcej 5\% średniej.

Na rysunku \ref{figure:tsp_init_example} przedstawiono wykres trzeciego z pięciu wykonanych przebiegów.
Można zaobserwować, że zarówno średnia, jak i najlepsze i najgorsze rozwiązanie spadają na przestrzeni wszystkich populacji, co oznacza, że wyniki sukcesywnie się polepszały.

Jednocześnie da się zauważyć, że wariancja wariancja utrzymywała się na dość stałym poziomie, z czego można wnioskować, że różnorodność genetyczna była zachowana.

\begin{table}[H]
	\caption{Wyniki heurystyki parametryzowanej znalezioną konfiguracją \label{table:tsp_init_results}}
	\centering
	\begin{tabular}{|l|r|r}
		\hline
		\multicolumn{1}{|c|}{{\bf Numer powtórzenia}} & \multicolumn{1}{c|}{{\bf Wynik}} & \multicolumn{1}{c|}{{\bf Różnica względem optimum}} \\ \hline \hline
		1                                             & 42129,167                        & \multicolumn{1}{r|}{14526,167}                      \\ \hline
		2                                             & 42808,0792                       & \multicolumn{1}{r|}{15205,0792}                     \\ \hline
		3                                             & 36656,3316                       & \multicolumn{1}{r|}{9053,3316}                      \\ \hline
		4                                             & 42174,1093                       & \multicolumn{1}{r|}{14571,1093}                     \\ \hline
		5                                             & 41143,6598                       & \multicolumn{1}{r|}{13540,6598}                     \\ \hline \hline
		{\bf Średnia}                                 & 40982,2694                      & \multicolumn{1}{r|}{13379,2694}                    \\ \hline
		{\bf Odchylenie standardowe}                  & 2227,5198                        &                       \\  \hhline{==~}
		{\bf Optimum}                                 & \multicolumn{1}{r|}{{\bf 27603}} & \multicolumn{1}{l}{}                                \\ \cline{1-2}
	\end{tabular}
\end{table}

\begin{figure}[H]
	\caption{Wykres przebiegu trzeciego powtórzenia znalezionej konfiguracji \label{figure:tsp_init_example}}
	\centering
	\graph{tsp_init_example.tex}
\end{figure}

\subsection{Poprawa konfiguracji początkowej}

\subsubsection{Przebieg}

W tabeli \ref{table:tsp_tweak_flow} przedstawiono przebieg procedury eksploracji, korzystając z tej samej reprezentacji co na poprzednim etapie.

Rozmiar populacji i współczynnik domieszek nie zmienił się względem konfiguracji z pierwszego etapu.
W pierwszym nawrocie określono, że nieznacznie mniejsze (0,58) prawdopodobieństwo krzyżowania i większa liczba pokoleń dają lepsze wyniki.
Drugi nawrót wykazał, że pierwotne prawdopodobieństwo krzyżowania daje lepsze wyniki, za to zwiększone zostało prawdopodobieństwo mutacji. 

\begin{table}[H]
	\caption{Przebieg procedury eksploracji poszukującej parametrów początkowych \label{table:tsp_tweak_flow}}
	\centering
	\begin{tabular}{c|c|c|}
		\cline{2-3}
		& {\bf Parametr}                                     & {\bf Określona wartość} \\ \hline
		\multicolumn{1}{|c|}{\multirow{4}{*}{{\bf Nawrót 1}}} & $\param{rozmiarPopulacji}$                         & 50                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,0                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,58, 0,1)             \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 110                     \\ \hline \hline
		\multicolumn{1}{|c|}{\multirow{4}{*}{{\bf Nawrót 2}}} & $\param{rozmiarPopulacji}$                         & 50                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,0                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,6, 0,15)             \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 110                     \\ \hline
	\end{tabular}
\end{table}	

\subsubsection{Wyniki}

W tabeli \ref{table:tsp_tweak_results} przedstawiono wyniki działania heurystyki dla konfiguracji \ref{config:tsp_base} znalezionej w tym etapie.

Średnia ocena jest niższa (a więc lepsza) od średniej z poprzedniego etapu.
Przeciętna różnica między znalezionym rozwiązaniem, a optimum spadła do około 9,5 tysiąca, a odchylenie standardowe nieznacznie (o około pół tysiąca) wzrosło.

Oznacza to, że udało się uzyskać lepsze wyniki kosztem nieznacznego pogorszenia stabilności heurystyki.

\begin{table}[H]
	\caption{Wyniki heurystyki parametryzowanej poprawioną konfiguracją \label{table:tsp_tweak_results}}
	\centering
	\begin{tabular}{|l|r|r}
		\hline
		{\bf Numer powtórzenia}      & \multicolumn{1}{l|}{{\bf Wynik}} & \multicolumn{1}{l|}{{\bf Różnica względem optimum}} \\ \hline \hline
		1                            & 39592,0623                       & \multicolumn{1}{r|}{11989,0623}                     \\ \hline
		2                            & 34292,9277                       & \multicolumn{1}{r|}{6689,9277}                      \\ \hline
		3                            & 37904,1809                       & \multicolumn{1}{r|}{10301,1809}                     \\ \hline \hline
		{\bf Średnia}                & 37263,0570                       & \multicolumn{1}{r|}{9660,0570}                      \\ \hline
		{\bf Odchylenie standardowe} & 2707,1178                        &                                                     \\ \hhline{==~}
		{\bf Optimum}                & {\bf 27603}                      &                                                     \\ \cline{1-2}
	\end{tabular}
\end{table}

\section{Problem plecakowy}

\subsection{Znalezienie konfiguracji początkowej}

\subsubsection{Przebieg}


Tabela \ref{table:knapsack_init_flow} przedstawia przebieg wykorzystanej procedury.

Jak widać, w pierwszym nawrocie znaleziono prawie najlepszą konfigurację, która tylko nieznacznie zmieniła się w kolejnym. 
Zmiany obejmowały prawdopodobieństwo krzyżowania oraz współczynnik domieszek.
Trzeci nawrót nie zmienił odnalezionej konfiguracji.

\begin{table}[H]
	\caption{Przebieg procedury eksploracji poszukującej parametrów początkowych \label{table:knapsack_init_flow}}
	\centering
	\begin{tabular}{c|c|c|}
		\cline{2-3}
		\multicolumn{1}{l|}{}                                 & {\bf Parametr}                                     & {\bf Określona wartość} \\ \hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 1}}} & $\param{rozmiarPopulacji}$                         & 50                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,25                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,6, 0,1)              \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 50                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{opSelNat}$                                 & \opName{natSel}(RS)                \\ \hline
		\hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 2}}} & $\param{rozmiarPopulacji}$                         & 50                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,1                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,8, 0,1)              \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 50                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{opSelNat}$                                 & \opName{natSel}(RS)                \\ \hline
		\hline
		\multicolumn{1}{|c|}{\multirow{5}{*}{{\bf Nawrót 3}}} & $\param{rozmiarPopulacji}$                         & 50                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,1                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,8, 0,1)              \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 50                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{opSelNat}$                                 & \opName{natSel}(RS)                \\ \hline
		
	\end{tabular}
\end{table}

\subsubsection{Wyniki}

Jak zostało pokazane w tabeli \ref{table:knapsack_init_results}, wyniki dla tak określonego zestawu parametrów są bardzo dobre - najgorszy z nich był większy od optimum o niecałe 6 \%.
W ostatnim z przebiegów udało się znaleźć optimum globalne.

Na rysunku \ref{figure:knapsack_init_example} pokazany został wykres tego przebiegu.
Można zaobserwować, że minimum zostało znalezione dość szybko, a dalsze działanie heurystyki przeszukiwało przestrzeń rozwiązań, często pogarszając wyniki.

\begin{table}[H]
	\caption{Wyniki heurystyki parametryzowanej znalezioną konfiguracją \label{table:knapsack_init_results}}
	\centering
	\begin{tabular}{|l|r|r}
		\hline
		\multicolumn{1}{|c|}{{\bf Numer powtórzenia}} & \multicolumn{1}{c|}{{\bf Wynik}} & \multicolumn{1}{c|}{{\bf Różnica względem optimum}} \\ \hline \hline
		1                                             & -1107                            & \multicolumn{1}{r|}{66}                             \\ \hline
		2                                             & -1156                            & \multicolumn{1}{r|}{17}                             \\ \hline
		3                                             & -1115                            & \multicolumn{1}{r|}{58}                             \\ \hline
		4                                             & -1120                            & \multicolumn{1}{r|}{53}                             \\ \hline
		5                                             & -1173                            & \multicolumn{1}{r|}{0}                              \\ \hline \hline
		{\bf Średnia}                                 & -1134,2000                          & \multicolumn{1}{r|}{38,8000}                           \\ \hline
		{\bf Odchylenie standardowe}                  & 28,6827                          & \multicolumn{1}{l}{}                                \\ \hhline{==~}
		{\bf Optimum}                                 & {\bf -1173}                      & \multicolumn{1}{l}{}                                \\ \cline{1-2}
	\end{tabular}
\end{table}

\begin{figure}[H]
	\caption{Wykres przebiegu piątego powtórzenia znalezionej konfiguracji \label{figure:knapsack_init_example}}
	\centering
	\graph{knapsack_init_example.tex}
\end{figure}

\subsection{Poprawa konfiguracji początkowej}

\subsubsection{Przebieg}

\todo{skomentuj}

\begin{table}[H]
	\caption{Przebieg procedury eksploracji poszukującej parametrów początkowych \label{table:knapsack_tweak_flow}}
	\centering
	\begin{tabular}{c|c|c|}
		\cline{2-3}
		& {\bf Parametr}                                     & {\bf Określona wartość} \\ \hline
		\multicolumn{1}{|c|}{\multirow{4}{*}{{\bf Nawrót 1}}} & $\param{rozmiarPopulacji}$                         & 60                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,1                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,75, 0,1)             \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 50                     \\ \hline \hline
		\multicolumn{1}{|c|}{\multirow{4}{*}{{\bf Nawrót 2}}} & $\param{rozmiarPopulacji}$                         & 60                      \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{wspDomieszek}$                             & 0,1                     \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $(\param{prawdKrzyzowania}, \param{prawdMutacji})$ & (0,75, 0,15)             \\ \cline{2-3} 
		\multicolumn{1}{|c|}{}                                & $\param{max}$                                      & 60                     \\ \hline
	\end{tabular}
\end{table}	

\subsubsection{Wyniki}
\todo{Blah, blah, here go results}

\begin{table}[H]
	\caption{Wyniki heurystyki parametryzowanej poprawioną konfiguracją \label{knapsack_tweak_results}}
	\centering
	\begin{tabular}{|l|r|r}
		\hline
		{\bf Numer powtórzenia}      & \multicolumn{1}{l|}{{\bf Wynik}} & \multicolumn{1}{l|}{{\bf Różnica względem optimum}} \\ \hline \hline
		1                                             & -1127                            & \multicolumn{1}{r|}{46}                             \\ \hline
		2                                             & -1161                            & \multicolumn{1}{r|}{12}                             \\ \hline
		3                                             & -1131                            & \multicolumn{1}{r|}{42}                             \\ \hline \hline
		{\bf Średnia}                                 & -1139,6667                       & \multicolumn{1}{r|}{33,3334}                        \\ \hline
		{\bf Odchylenie standardowe}                  & 18,5831                          &                                                     \\ \hhline{==~}
		{\bf Optimum}                                 & {\bf -1173}                      &                                                     \\ \cline{1-2}
	\end{tabular}
\end{table}

\todo{poszło lepiej niż init}


\end{document}